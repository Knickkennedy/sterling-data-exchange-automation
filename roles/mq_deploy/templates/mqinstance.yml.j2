apiVersion: mq.ibm.com/v1beta1
kind: QueueManager
metadata:
  name: "{{ mq_crd_name }}"
  namespace: "{{ mq_namespace }}"
spec:
  license:
    accept: true
    license: L-DRNQ-NGCA76
    use: NonProduction
  template:
    pod:
      containers:
        name: qmgr
          - env:
            - name: MQ_DEV
              value: "true"
            - name: MQ_CONNAUTH_USE_HTP
              value: "true"
            - name: MQ_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: "{{ mq_secret }}"
                  key: MQ_ADMIN_PASSWORD
            - name: MQ_APP_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: "{{ mq_secret }}"
                  key: MQ_APP_PASSWORD
  queueManager:
    availability:
      type: SingleInstance
    storage:
      defaultClass: "{{ file_storage_class }}"
      queueManager:
        class: "{{ file_storage_class }}"
        deleteClaim: true
        size: "{{ mq_storage_size }}"
        type: persistent-claim
  version: "{{ version }}"
  web:
    enabled: true
